{"ast":null,"code":"import { PORT_MAP } from './port-map';\nexport const extendBrokerImplementation = partialBrokerImplementation => ({ ...partialBrokerImplementation,\n  connect: _ref => {\n    let {\n      call\n    } = _ref;\n    return async () => {\n      const {\n        port1,\n        port2\n      } = new MessageChannel();\n      const portId = await call('connect', {\n        port: port1\n      }, [port1]);\n      PORT_MAP.set(port2, portId);\n      return port2;\n    };\n  },\n  disconnect: _ref2 => {\n    let {\n      call\n    } = _ref2;\n    return async port => {\n      const portId = PORT_MAP.get(port);\n\n      if (portId === undefined) {\n        throw new Error('The given port is not connected.');\n      }\n\n      await call('disconnect', {\n        portId\n      });\n    };\n  },\n  isSupported: _ref3 => {\n    let {\n      call\n    } = _ref3;\n    return () => call('isSupported');\n  }\n});","map":{"version":3,"mappings":"AAGA,SAASA,QAAT,QAAyB,YAAzB;AAEA,OAAO,MAAMC,0BAA0B,GACnCC,2BADsC,KAGkB,EACpD,GAAGA,2BADiD;EAEpDC,OAAO,EAAE,QAAa;IAAA,IAAZ;MAAEC;IAAF,CAAY;IAClB,OAAO,YAAiC;MACpC,MAAM;QAAEC,KAAF;QAASC;MAAT,IAAmB,IAAIC,cAAJ,EAAzB;MAEA,MAAMC,MAAM,GAAW,MAAMJ,IAAI,CAAC,SAAD,EAAY;QAAEK,IAAI,EAAEJ;MAAR,CAAZ,EAA6B,CAACA,KAAD,CAA7B,CAAjC;MAEAL,QAAQ,CAACU,GAAT,CAAaJ,KAAb,EAAoBE,MAApB;MAEA,OAAOF,KAAP;IACH,CARD;EASH,CAZmD;EAapDK,UAAU,EAAE,SAAa;IAAA,IAAZ;MAAEP;IAAF,CAAY;IACrB,OAAO,MAAOK,IAAP,IAA2C;MAC9C,MAAMD,MAAM,GAAGR,QAAQ,CAACY,GAAT,CAAaH,IAAb,CAAf;;MAEA,IAAID,MAAM,KAAKK,SAAf,EAA0B;QACtB,MAAM,IAAIC,KAAJ,CAAU,kCAAV,CAAN;MACH;;MAED,MAAMV,IAAI,CAAC,YAAD,EAAe;QAAEI;MAAF,CAAf,CAAV;IACH,CARD;EASH,CAvBmD;EAwBpDO,WAAW,EAAE,SAAa;IAAA,IAAZ;MAAEX;IAAF,CAAY;IACtB,OAAO,MAAMA,IAAI,CAAC,aAAD,CAAjB;EACH;AA1BmD,CAHlB,CAAnC","names":["PORT_MAP","extendBrokerImplementation","partialBrokerImplementation","connect","call","port1","port2","MessageChannel","portId","port","set","disconnect","get","undefined","Error","isSupported"],"sources":["D:\\programer\\xampp\\htdocs\\E-Learning\\reactjs\\node_modules\\broker-factory\\src\\helpers\\extend-broker-implementation.ts"],"sourcesContent":["import { IWorkerDefinition } from 'worker-factory';\nimport { IBrokerDefinition, IDefaultBrokerDefinition } from '../interfaces';\nimport { TBrokerImplementation } from '../types';\nimport { PORT_MAP } from './port-map';\n\nexport const extendBrokerImplementation = <T extends IBrokerDefinition, U extends IWorkerDefinition>(\n    partialBrokerImplementation: TBrokerImplementation<T, U>\n): TBrokerImplementation<T & IDefaultBrokerDefinition, U> =>\n    <TBrokerImplementation<T & IDefaultBrokerDefinition, U>>{\n        ...partialBrokerImplementation,\n        connect: ({ call }) => {\n            return async (): Promise<MessagePort> => {\n                const { port1, port2 } = new MessageChannel();\n\n                const portId = <number>await call('connect', { port: port1 }, [port1]);\n\n                PORT_MAP.set(port2, portId);\n\n                return port2;\n            };\n        },\n        disconnect: ({ call }) => {\n            return async (port: MessagePort): Promise<void> => {\n                const portId = PORT_MAP.get(port);\n\n                if (portId === undefined) {\n                    throw new Error('The given port is not connected.');\n                }\n\n                await call('disconnect', { portId });\n            };\n        },\n        isSupported: ({ call }) => {\n            return () => call('isSupported');\n        }\n    };\n"]},"metadata":{},"sourceType":"module"}